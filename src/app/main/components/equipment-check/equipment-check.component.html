<div class="w-100 h-100 overflow-auto">
  <div class="min-vh-100  row align-items-center m-0 p-2 p-md-5">
    <div class="card col  bg-dark text-light text-center mx-auto p-0"
         style="max-width: 1076px;box-shadow: 0 80px 60px -60px rgba(21, 21, 21, 0.57), 0 -80px 60px -60px rgba(21, 21, 21, 0.57)">

      <div class="text-center text-light row m-0  navbar navbar-collapse navbar-dark card-header accordion" >

        <h1 class="col show text-truncate m-0 " >Технические требования и тестирование оборудования </h1>

      </div>

      <div class="card-body">

        <div class="card bg-transparent">
          <h2 class="text-left card-header m-0">
            Для участия в наших играх вам необходимо иметь камеру, микрофон и стабильный интернет для участия в командном видеочате и просмотра прямой трансляции игры.<br>
            Вы можете протестировать свое оборудование и проверить скорость подключение к интернету на текущей странице. <br>
          </h2>
          <div class="card-footer">
            <p class="lead">
              От качества вашей связи и исправности оборудования зависит качество игры - как для вас, так и для окружающих. Просим отнестись к этому вопросу серьезно.
            </p>
          </div>
        </div>

        <div class="alert alert-warning alert-dismissible fade show my-4" role="alert">
          Мы рекомендуем вам использовать для игры персональный компьютер или ноутбук для получения наибольшего удовольствия от игры!
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

      </div>


      <div id="checkAccordion">
        <div data-toggle="collapse" data-target="#collapseBrowser" class="card-header">
          <button (mouseenter)=" collapseBrowserBtnText.classList.remove('text-muted')"
                  (mouseleave)="collapseBrowserBtnText.classList.add('text-muted')"
                  (click)="scrollDownCollapseBrowser.classList.remove('scrollDownButton')"
            class="btn btn-outline-primary">
            <span #collapseBrowserBtnText class="text-muted">Технические требования | </span>
            БРАУЗЕР
            <svg #scrollDownCollapseBrowser width="1em" height="1em" viewBox="0 0 16 16" class="scrollDownButton bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
            </svg>
          </button>
        </div>
        <div id="collapseBrowser" data-parent="#checkAccordion" class="collapse card-body"  >
          <div class="card bg-dark">
            <div class="card-body pb-0">
              <div class="alert alert-warning alert-dismissible fade show my-4" role="alert">
                Здесь перечислены браузеры, которые объявили о поддержке требуемых технологий. Вы можете попробовать
                использовать другие браузеры, но мы не можем гарантировать их поддержку.
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
            </div>
            <div class="card-body d-none pt-0 d-lg-block">
              <h1> Браузеры для настольных ПК и ноутбуков. </h1>
              <ul class="list-group list-group-horizontal-sm justify-content-center">
                <li class="list-group-item m-2 rounded-lg bg-success text-light">
                  <a href="https://www.google.com/intl/ru_ru/chrome/" target="_blank" class="text-light">Google Chrome</a>
                </li>
                <li class="list-group-item m-2 rounded-lg bg-success text-light">
                  <a href="https://browser.yandex.ru/" target="_blank" class="text-light">Яндекс.Браузер</a>
                </li>
                <li class="list-group-item m-2 rounded-lg bg-success text-light">
                  <a href="https://www.opera.com/ru" target="_blank" class="text-light">Opera</a>
                </li>
              </ul>
              <div class="text-muted text-center">Вы можете скачать необходимый браузер кликнув по нему.</div>
            </div>

            <div class="card-body d-block d-lg-none">
              <h1> Браузеры для мобильных устройств и планшетов. </h1>

              <div class="card-columns">
                <div class=" card bg-dark">
                  <div class="card-header">Google Chrome</div>
                  <div class="card-body p-2">
                    <div class="d-inline">
                      <a class="btn btn-sm mx-2 btn-primary"
                         href="https://play.google.com/store/apps/details?id=com.android.chrome&hl=ru" target="_blank">Андроид</a>
                      <a class="btn btn-sm mx-2 btn-primary"
                         href="https://apps.apple.com/ru/app/chrome-%D0%B1%D1%80%D0%B0%D1%83%D0%B7%D0%B5%D1%80-%D0%BE%D1%82-google/id535886823"
                         target="_blank">IOS</a>
                    </div>
                  </div>
                </div>
                <div class=" card bg-dark">
                  <div class="card-header">Яндекс.Браузер</div>
                  <div class="card-body p-2">
                    <div class="d-inline">
                      <a class="btn btn-sm mx-2 btn-primary"
                         href="https://play.google.com/store/apps/details?id=com.yandex.browser&hl=ru" target="_blank">Андроид</a>
                      <a class="btn btn-sm mx-2 btn-primary"
                         href="https://apps.apple.com/ru/app/%D1%8F%D0%BD%D0%B4%D0%B5%D0%BA%D1%81-%D0%B1%D1%80%D0%B0%D1%83%D0%B7%D0%B5%D1%80/id483693909"
                         target="_blank">IOS</a>
                    </div>
                  </div>
                </div>
                <div class=" card bg-dark">
                  <div class="card-header">Opera</div>
                  <div class="card-body p-2">
                    <div class="d-inline">
                      <a class="btn btn-sm mx-2 btn-primary"
                         href="https://play.google.com/store/apps/details?id=com.opera.browser"
                         target="_blank">Андроид</a>
                      <a class="btn btn-sm mx-2 btn-primary"
                         href="https://apps.apple.com/ru/app/%D0%B2%D0%B5%D0%B1-%D0%B1%D1%80%D0%B0%D1%83%D0%B7%D0%B5%D1%80-opera-touch/id1411869974"
                         target="_blank">IOS</a>
                    </div>
                  </div>
                </div>
                <div class=" card bg-dark">
                  <div class="card-header border-0 rounded">Safari for IOS</div>
                </div>
              </div>

            </div>

            <h1 class="text-center m-0 card-header text-light"> Информация о вашем браузере </h1>

            <div class="card-body text-left">
              <ul class="text-light list-group">
                <li class="list-group-item list-group-item-dark">
                  <h2 class="mb-1">Браузер: </h2>
                  {{detectRTC.browser.name}};
                  <span class="text-muted"> версия: {{detectRTC.browser.version}} </span><br>
                  <span *ngIf="detectRTC.browser.isChrome" class="text-muted feedback">
                Этот браузер определяется как Chrome. Если вы используете браузер Яндекс.Браузер или новый MS Edge - это не ошибка. Эти браузеры основыны на движке Chromium.
              </span>
                </li>
                <li class="list-group-item list-group-item-dark">
                  <h2 class="mb-1">Операционная система: </h2>
                  {{detectRTC.osName}};
                  <span class="text-muted"> версия: {{detectRTC.osVersion}};
                    {{detectRTC.isMobileDevice ? ' (мобильное устройство)' : ''}}
              </span>
                </li>
                <li class="list-group-item  list-group-item-dark">
                  <h2 class="mb-1">Поддержка требуемых технологии: </h2>
                  <span
                    [ngClass]="{'text-success':detectRTC.isWebRTCSupported, 'text-danger': !detectRTC.isWebRTCSupported}">WebRTC: {{detectRTC.isWebRTCSupported ? 'Да' : 'Нет'}}</span>
                  <span class="text-muted"> (поддержка связи в режиме реального времени)</span>
                  <br>
                  <span
                    [ngClass]="{'text-success':detectRTC.isRtpDataChannelsSupported, 'text-danger': !detectRTC.isRtpDataChannelsSupported}">RTP: {{detectRTC.isRtpDataChannelsSupported ? 'Да' : 'Нет'}}</span>
                  <span class="text-muted"> (поддержка соединений с участниками видеочата)</span>
                  <br>
                  <span
                    [ngClass]="{'text-success':detectRTC.isWebSocketsSupported && !detectRTC.isWebSocketsBlocked, 'text-danger': !detectRTC.isWebSocketsSupported || detectRTC.isWebSocketsBlocked}">
                WebSocket: {{detectRTC.isWebSocketsSupported ? 'Да' : 'Нет'}}
                    <span
                      class="text-muted">{{detectRTC.isWebSocketsBlocked ? '(доступна, но заблокирована)' : ''}}</span>
              </span> <span class="text-muted">(поддержка работы с сервером для прямой трансляции)</span>

                </li>
                <li class="list-group-item list-group-item-dark">
                  <h2 class="mb-1">Доступ к камере и микрофону: </h2>
                  <span
                    [ngClass]="{'text-success':detectRTC.isGetUserMediaSupported, 'text-danger': !detectRTC.isGetUserMediaSupported}">{{detectRTC.isGetUserMediaSupported ? 'Возможен по запросу' : 'Не доступен'}}</span>
                  <br>
                </li>


              </ul>
            </div>
          </div>
        </div>

        <div data-toggle="collapse" data-target="#collapseNet" class="card-header">
          <button class="btn btn-outline-primary"
                  (mouseenter)=" collapseNetBtnText.classList.remove('text-muted')"
                  (mouseleave)="collapseNetBtnText.classList.add('text-muted')"
                  (click)="scrollDownCollapseNetBtn.classList.remove('scrollDownButton')"
          >
            <span #collapseNetBtnText class="text-muted">Технические требования | </span>
            ПОДКЛЮЧЕНИЕ (Интернет)
            <svg #scrollDownCollapseNetBtn width="1em" height="1em" viewBox="0 0 16 16" class="scrollDownButton bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
            </svg>
          </button>
        </div>
        <div  id="collapseNet" data-parent="#checkAccordion" class="collapse card-body">
          <div class="alert alert-warning alert-dismissible fade show my-4" role="alert">
            У вас должен быть стабильный интернет, минимум 20 Мбит/с
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="card bg-dark">
            <div class="w-100 position-relative h-auto">
              <iframe
                class="border-0 w-100 h-100 overflow-hidden"
                style="min-height:360px;"
                src="//openspeedtest.com/Get-widget.php"></iframe>
            </div>
          </div>
        </div>

        <div data-toggle="collapse" data-target="#collapseInputDevices" class="card-header">
          <button class="btn btn-outline-primary"
                  (mouseenter)=" collapseInputDevicesBtnText.classList.remove('text-muted')"
                  (mouseleave)="collapseInputDevicesBtnText.classList.add('text-muted')"
                  (click)="collapseInputDevices.classList.remove('scrollDownButton')"
          >
            <span #collapseInputDevicesBtnText class="text-muted">Технические требования | </span>
            ОБОРУДОВАНИЕ (Камера и микрофон)
            <svg #collapseInputDevices width="1em" height="1em" viewBox="0 0 16 16" class="scrollDownButton bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
            </svg>
          </button>
        </div>
        <div  id="collapseInputDevices" data-parent="#checkAccordion" class="collapse card-body">

          <ul *ngIf="detectRTC.isGetUserMediaSupported " class=" mb-4 text-light text-left list-group">
            <li class=" card-header list-group-item list-group-item-dark text-center">
              <h2 class="mb-1">Информация от вашего браузера </h2>

            </li>
            <li class="list-group-item list-group-item-dark">
              <h2 class="mb-1">Доступ к камере и микрофону: </h2>
              <span
                [ngClass]="{'text-success':detectRTC.isGetUserMediaSupported, 'text-danger': !detectRTC.isGetUserMediaSupported}">{{detectRTC.isGetUserMediaSupported ? 'Возможен по запросу' : 'Не доступен'}}</span>

              <button *ngIf="!mediaDevicesArray && detectRTC.isGetUserMediaSupported"
                      class="btn btn-sm btn-link"
                      (click)="getUserMedia();getMediaDevicesListSpinner.classList.remove('d-none')"
              >

                <div #getMediaDevicesListSpinner class="d-none spinner-border spinner-border-sm" role="status">

                </div>
                (Просмотреть список доступного оборудования)
              </button>
            </li>

            <li *ngIf="mediaDevicesArray" class="list-group-item list-group-item-dark">
              <h2 class="mb-1">Доступное оборудование: </h2>


              <ul>
                <li>Устройство захвата аудио:
                  <ul class="mb-2">
                    <li *ngFor="let audioInput of mediaDevicesArray.audioInput">{{audioInput.label}}</li>
                  </ul>
                </li>
                <li>Аудиовыходы:
                  <ul class="mb-2">
                    <li *ngFor="let audioOutput of mediaDevicesArray.audioOutput">{{audioOutput.label}}</li>
                  </ul>
                </li>
                <li>
                  Устройство захвата видео:
                  <ul class="mb-2">
                    <li *ngFor="let videoInput of mediaDevicesArray.videoInput">{{videoInput.label}}</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>

          <div *ngIf="!detectRTC.isGetUserMediaSupported" class="alert alert-warning alert-dismissible fade show my-4" role="alert">
            У вашего браузера нет поддержки использования камеры и микрофона.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div *ngIf="detectRTC.isGetUserMediaSupported " class=" row align-items-center m-0">

            <div class="col-md-5 text-center mb-2 m-md-0">

              <button *ngIf="!mediaDevicesArray" (click)="getUserMedia();checkMediaDevicesSpinner.classList.remove('d-none')" class="btn btn-block btn-success">
                <div #checkMediaDevicesSpinner class="d-none spinner-border spinner-border-sm" role="status"></div>
                Начать тестирование
              </button>


              <div *ngIf="mediaDevicesArray"  class="alert alert-warning alert-dismissible fade show mb-2" role="alert">
                Выберите устройство и проверьте его работу в плеере справа
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>

              <div *ngIf="mediaDevicesArray" class="input-group">
                <select #audioSelect
                        id="audioSelect"
                        class="form-control my-2 bg-secondary text-light border-muted selectpicker"
                        (change)="selectedAudioInput = audioSelect.value; checkingInputDevices()"
                >
                  <option value="" hidden>Аудиовход</option>
                  <option *ngFor="let mediaDevice of mediaDevicesArray['audioInput']"
                          value="{{mediaDevice.deviceId}}"
                          class="border-light">
                    {{mediaDevice.label}}
                  </option>
                </select>
                <select #videoSelect
                        class="form-control my-2 bg-secondary text-light"
                        (change)="selectedVideoInput = videoSelect.value; checkingInputDevices()">
                  <option value="" hidden>Видеовход</option>
                  <option *ngFor="let mediaDevice of mediaDevicesArray['videoInput']"
                          value="{{mediaDevice.deviceId}}"
                  >{{mediaDevice.label}}</option>
                </select>
              </div>
              <button *ngIf="mediaDevicesArray" (click)="stopUserMedia();this.mediaDevicesArray = null;this.testPlayer.srcObject = null"
                      class="btn btn-block btn-danger">Закончить тестирование
              </button>


            </div>
            <div class="col-md-7 p-0">
              <div id="checkingInputDevicesContainer" class="card bg-dark">
                <div class="card-img embed-responsive embed-responsive-16by9">
                  <video id="checkingVideoDevicesPlayer" class="embed-responsive-item bg-secondary" playsinline
                         autoplay></video>
                  <div  *ngIf="!selectedVideoInput" class="w-100 h-100 position-absolute embed-responsive-item row p-0 m-0 align-items-center">
                  <div class="col p-0 m-0 text-dark ">
                    <svg width="10em" height="10em" viewBox="0 0 16 16" class="bi bi-collection-play" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" d="M14.5 13.5h-13A.5.5 0 0 1 1 13V6a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5zm-13 1A1.5 1.5 0 0 1 0 13V6a1.5 1.5 0 0 1 1.5-1.5h13A1.5 1.5 0 0 1 16 6v7a1.5 1.5 0 0 1-1.5 1.5h-13zM2 3a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 0-1h-11A.5.5 0 0 0 2 3zm2-2a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7A.5.5 0 0 0 4 1z"/>
                      <path fill-rule="evenodd" d="M6.258 6.563a.5.5 0 0 1 .507.013l4 2.5a.5.5 0 0 1 0 .848l-4 2.5A.5.5 0 0 1 6 12V7a.5.5 0 0 1 .258-.437z"/>
                    </svg>
                  </div>
                  </div>
                </div>
                <form class="row px-0 m-0 card-header py-1" #testPlayerVolumeContainer
                      *ngIf="selectedAudioInput || selectedVideoInput">
                  <span class="col-auto my-auto p-0 mx-1">Громкость</span>
                  <div class="form-group col p-0 my-auto mx-1">
                    <input type="range" #testPlayerVolume class="form-control-range"
                           (change)="testPlayer.volume = testPlayerVolume.value/100" [value]="testPlayer.volume*100">
                  </div>
                  <button class="btn col-auto mx-1 p-0 input-group-text" (click)="testPlayer.muted = !testPlayer.muted">
                    <svg *ngIf="testPlayer.muted" class="bi bi-volume-mute" width="1.5em" height="1.5em"
                         viewBox="0 0 16 16"
                         fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd"
                            d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zM6 5.04L4.312 6.39A.5.5 0 0 1 4 6.5H2v3h2a.5.5 0 0 1 .312.11L6 10.96V5.04zm7.854.606a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708l4-4a.5.5 0 0 1 .708 0z"/>
                      <path fill-rule="evenodd"
                            d="M9.146 5.646a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0z"/>
                    </svg>
                    <svg *ngIf="!testPlayer.muted" class="bi bi-volume-up" width="1.5em" height="1.5em"
                         viewBox="0 0 16 16"
                         fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd"
                            d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zM6 5.04L4.312 6.39A.5.5 0 0 1 4 6.5H2v3h2a.5.5 0 0 1 .312.11L6 10.96V5.04z"/>
                      <path
                        d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"/>
                      <path
                        d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"/>
                      <path
                        d="M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707z"/>
                    </svg>
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>



      </div>


    </div>
  </div>
</div>

